<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoiceVerse - Windows Aero Edition</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/aero_theme.css') }}">
    <meta name="csrf-token" content="{{ csrf_token }}">
</head>
<body>
    <!-- Animated Aero Background -->
    <div class="aero-background">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
        <div class="orb orb-4"></div>
        <div class="aurora-effect"></div>
    </div>

    <!-- Main Window Container -->
    <div class="aero-window">
        <!-- Window Title Bar -->
        <div class="window-titlebar">
            <div class="titlebar-content">
                <div class="app-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="10" stroke="white" stroke-width="2"/>
                        <path d="M8 12L10 14L14 10" stroke="white" stroke-width="2"/>
                    </svg>
                </div>
                <span class="window-title">VoiceVerse - AI Text-to-Speech Studio</span>
            </div>
            <div class="window-controls">
                <button class="window-btn minimize-btn" onclick="minimizeWindow()">
                    <span></span>
                </button>
                <button class="window-btn maximize-btn" onclick="maximizeWindow()">
                    <span></span>
                </button>
                <button class="window-btn close-btn" onclick="closeWindow()">
                    <span>√ó</span>
                </button>
            </div>
        </div>

        <!-- Navigation Bar (Media Player Style) -->
        <nav class="aero-navbar">
            <div class="nav-section">
                <button class="nav-btn active" data-tab="generate">
                    <span class="nav-icon">üéôÔ∏è</span>
                    <span class="nav-text">Generate</span>
                </button>
                <button class="nav-btn" data-tab="library">
                    <span class="nav-icon">üìö</span>
                    <span class="nav-text">Library</span>
                </button>
                <button class="nav-btn" data-tab="agents">
                    <span class="nav-icon">ü§ñ</span>
                    <span class="nav-text">AI Agents</span>
                </button>
                <button class="nav-btn" data-tab="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">Settings</span>
                </button>
            </div>
            <div class="nav-user">
                <span class="user-name">{{ username }}</span>
                <button class="logout-btn" onclick="window.location.href='/logout'">Sign Out</button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <div class="window-content">
            <div class="content-wrapper">
                <!-- Sidebar -->
                <aside class="aero-sidebar">
                    <div class="sidebar-section">
                        <h3 class="section-title">Voice Selection</h3>
                        <div class="voice-options">
                            <label class="voice-option alloy-gradient">
                                <input type="radio" name="voice" value="alloy" checked>
                                <span class="voice-label">
                                    <span class="voice-icon">üé≠</span>
                                    <span class="voice-name">Alloy</span>
                                    <span class="voice-desc">Neutral & Versatile</span>
                                </span>
                            </label>
                            <label class="voice-option echo-gradient">
                                <input type="radio" name="voice" value="echo">
                                <span class="voice-label">
                                    <span class="voice-icon">üé§</span>
                                    <span class="voice-name">Echo</span>
                                    <span class="voice-desc">Male & Clear</span>
                                </span>
                            </label>
                            <label class="voice-option fable-gradient">
                                <input type="radio" name="voice" value="fable">
                                <span class="voice-label">
                                    <span class="voice-icon">üìñ</span>
                                    <span class="voice-name">Fable</span>
                                    <span class="voice-desc">British Storyteller</span>
                                </span>
                            </label>
                            <label class="voice-option nova-gradient">
                                <input type="radio" name="voice" value="nova">
                                <span class="voice-label">
                                    <span class="voice-icon">‚ú®</span>
                                    <span class="voice-name">Nova</span>
                                    <span class="voice-desc">Warm & Friendly</span>
                                </span>
                            </label>
                            <label class="voice-option onyx-gradient">
                                <input type="radio" name="voice" value="onyx">
                                <span class="voice-label">
                                    <span class="voice-icon">üé©</span>
                                    <span class="voice-name">Onyx</span>
                                    <span class="voice-desc">Deep & Authoritative</span>
                                </span>
                            </label>
                            <label class="voice-option shimmer-gradient">
                                <input type="radio" name="voice" value="shimmer">
                                <span class="voice-label">
                                    <span class="voice-icon">üí´</span>
                                    <span class="voice-name">Shimmer</span>
                                    <span class="voice-desc">Soft & Calming</span>
                                </span>
                            </label>
                        </div>
                    </div>

                    <div class="sidebar-section">
                        <h3 class="section-title">Speed Control</h3>
                        <div class="speed-control">
                            <input type="range" id="speedSlider" min="0.25" max="4" step="0.25" value="1">
                            <div class="speed-display">
                                <span id="speedValue">1.0</span>x
                            </div>
                        </div>
                    </div>

                    <div class="sidebar-section">
                        <h3 class="section-title">AI Features</h3>
                        <div class="ai-toggles">
                            <label class="aero-toggle">
                                <input type="checkbox" id="preprocessToggle">
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Smart Preprocessing</span>
                            </label>
                            <label class="aero-toggle">
                                <input type="checkbox" id="chunkingToggle">
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Smart Chunking</span>
                            </label>
                            <label class="aero-toggle">
                                <input type="checkbox" id="qualityToggle">
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">HD Quality</span>
                            </label>
                        </div>
                    </div>
                </aside>

                <!-- Main Panel -->
                <main class="main-panel">
                    <!-- Generate Tab -->
                    <div class="tab-content active" id="generate-tab">
                        <button class="back-to-sidebar" onclick="backToSidebar()">
                            ‚Üê Back to Menu
                        </button>
                        <div class="glass-panel">
                            <h2 class="panel-title">Text to Speech Generator</h2>

                            <form id="ttsForm" method="POST" enctype="multipart/form-data">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token }}">

                                <div class="form-section">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="filename" class="form-label">File Name</label>
                                            <input type="text" id="filename" name="filename"
                                                   class="aero-input" placeholder="Enter file name..."
                                                   value="audio_{{ timestamp }}" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="group" class="form-label">Category</label>
                                            <input type="text" id="group" name="group"
                                                   class="aero-input" placeholder="Enter category..."
                                                   value="General">
                                        </div>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <label for="text" class="form-label">Enter Your Text</label>
                                    <div class="textarea-wrapper">
                                        <textarea id="text" name="text" class="aero-textarea"
                                                  placeholder="Type or paste your text here... You can also upload a file below."
                                                  rows="10" required></textarea>
                                        <div class="char-counter">
                                            <span id="charCount">0</span> / 100,000 characters
                                        </div>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <div class="file-upload-section">
                                        <label for="fileUpload" class="file-upload-label">
                                            <span class="upload-icon">üìÑ</span>
                                            <span class="upload-text">Upload Document (PDF, DOCX, TXT)</span>
                                            <input type="file" id="fileUpload" name="file"
                                                   accept=".pdf,.docx,.txt" style="display: none;">
                                        </label>
                                        <div id="fileInfo" class="file-info"></div>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="aero-btn primary shimmer-effect">
                                        <span class="btn-icon">üéµ</span>
                                        <span class="btn-text">Generate Audio</span>
                                        <span class="btn-glow"></span>
                                    </button>
                                    <button type="button" class="aero-btn secondary" onclick="analyzeText()">
                                        <span class="btn-icon">üìä</span>
                                        <span class="btn-text">Analyze Quality</span>
                                    </button>
                                </div>
                            </form>
                        </div>

                        <!-- AI Analysis Panel -->
                        <div id="analysisPanel" class="glass-panel analysis-panel" style="display: none;">
                            <h3 class="panel-subtitle">AI Analysis Results</h3>
                            <div id="analysisContent" class="analysis-content"></div>
                        </div>
                    </div>

                    <!-- Library Tab -->
                    <div class="tab-content" id="library-tab" style="display: none;">
                        <button class="back-to-sidebar" onclick="backToSidebar()">
                            ‚Üê Back to Menu
                        </button>
                        <div class="glass-panel">
                            <h2 class="panel-title">Audio Library</h2>
                            <div class="library-filters">
                                <input type="text" class="aero-input search-input"
                                       placeholder="Search audio files..." id="searchInput">
                                <select class="aero-select" id="categoryFilter">
                                    <option value="">All Categories</option>
                                </select>
                            </div>
                            <div id="audioLibrary" class="audio-grid">
                                <!-- Audio files will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Agents Tab -->
                    <div class="tab-content" id="agents-tab" style="display: none;">
                        <button class="back-to-sidebar" onclick="backToSidebar()">
                            ‚Üê Back to Menu
                        </button>
                        <div class="glass-panel">
                            <h2 class="panel-title">AI Agent Dashboard</h2>
                            <div class="agents-grid">
                                <!-- Agent cards will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Settings Tab -->
                    <div class="tab-content" id="settings-tab" style="display: none;">
                        <button class="back-to-sidebar" onclick="backToSidebar()">
                            ‚Üê Back to Menu
                        </button>
                        <div class="glass-panel">
                            <h2 class="panel-title">Settings</h2>
                            <div class="settings-content">
                                <!-- Settings will be loaded here -->
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <!-- Windows Media Player Style Bottom Bar -->
        <div class="player-bar">
            <div class="player-controls">
                <button class="player-btn" id="prevBtn" disabled>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                        <path d="M6 6v12l8-6z M14 6v12l8-6z"/>
                    </svg>
                </button>
                <button class="player-btn play-btn" id="playPauseBtn">
                    <svg class="play-icon" width="20" height="20" viewBox="0 0 24 24" fill="white">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <svg class="pause-icon" style="display:none;" width="20" height="20" viewBox="0 0 24 24" fill="white">
                        <rect x="6" y="4" width="4" height="16"/>
                        <rect x="14" y="4" width="4" height="16"/>
                    </svg>
                </button>
                <button class="player-btn" id="nextBtn" disabled>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                        <path d="M18 18v-12l-8 6z M10 18v-12l-8 6z"/>
                    </svg>
                </button>
            </div>

            <div class="player-info">
                <div class="track-info">
                    <span class="track-name" id="trackName">No audio playing</span>
                    <span class="track-artist" id="trackArtist">Select a file to play</span>
                </div>
                <div class="progress-bar-wrapper">
                    <span class="time-display" id="currentTime">0:00</span>
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                        <div class="progress-handle" id="progressHandle"></div>
                    </div>
                    <span class="time-display" id="totalTime">0:00</span>
                </div>
            </div>

            <div class="player-extras">
                <button class="volume-btn" id="volumeBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                        <path d="M3 9v6h4l5 5V4L7 9H3z M16.5 12A4.5 4.5 0 0014 7.5v9a4.5 4.5 0 002.5-4.5z"/>
                    </svg>
                </button>
                <div class="volume-slider-container">
                    <input type="range" class="volume-slider" id="volumeSlider"
                           min="0" max="100" value="70">
                    <div class="volume-fill" id="volumeFill"></div>
                </div>
                <button class="player-btn" id="downloadBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner-ring"></div>
            <div class="spinner-text">Generating Audio...</div>
        </div>
    </div>

    <!-- Audio Element -->
    <audio id="audioPlayer" style="display: none;"></audio>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/aero_player.js') }}"></script>
</body>
</html>